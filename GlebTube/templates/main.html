{% extends 'index.html' %}

{% block content %}
{% load static %}


<div class="album py-5 bg-body-tertiary">
    <div class="container">
      <h3>GlebTube</h3>
      <div class="row">   <!--row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3 mt-4--> 
        {% for video in videos %}
        <div class="col-xl-3 col-lg-4 col-md-6 col-sm-12 p-3">
            
            <div class="card shadow-sm border-0" onclick="location.href='/watch/{{video.id}}'" style="cursor: pointer;" title="{{video.caption}}">
              
              <img class="bd-placeholder-img card-img-top rounded" src="{{video.img.url}}" width="100%" height="200" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Placeholder: Thumbnail" preserveAspectRatio="xMidYMid slice" focusable="false">
              <div class="card-body">
                {% if request.user == video.author and author_buttons %}
                <div class = "mt-1 float-right">
                <button type="button" class="btn btn-sm btn-success" onclick="event.stopPropagation();">
                  Изменить
                  </button>
                <button type="button" value="{{video.id}}" class="btn btn-sm btn-danger delete-button" onclick="event.stopPropagation();">
                  Удалить
                </button>
              </div>
                  {% endif %}
                <p class="card-text text-uppercase font-weight-bold text-truncate overflow-hidden">{{video.caption}}</p>
                <div class="d-flex justify-content-between align-items-center">
                  <div class="btn-group">
                    <small class="text-body-secondary">Дата выхода: {{video.date_uploaded}}, </small>
                    <small class="text-body-secondary">Количество просмотров: {{video.views}}</small>
                  </div>
                </div>
              </div>
            </div>
          </div>
        {% endfor %}
      </div>
    </div>
  </div>

{% if author_buttons %}
  {% csrf_token %}
  <script src="{% static '/js/delete_video.js' %}"></script>
{% endif %}


{% endblock %}